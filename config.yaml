# Mihomo é…ç½®
# åç§°ï¼šconfig.yaml
# ç‰ˆæœ¬ï¼š2026-02-21
# é€‚ç”¨: Windows / Android

# ç«¯å£
port: 7890
socks-port: 7891
mixed-port: 7892
redir-port: 9797
tproxy-port: 9898

# é€šç”¨
ipv6: true
mode: rule
log-level: info
find-process-mode: strict
allow-lan: true
unified-delay: true

# é¢æ¿
external-controller: 127.0.0.1:9090
external-ui: webui
external-ui-url: 'https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip'

# ç¼“å­˜
profile:
  store-selected: true
  store-fake-ip: true

# å—…æ¢
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]

# TUN
tun:
  enable: true
  stack: system
  auto-detect-interface: true
  mtu: 0
  auto-route: true
  auto-redirect: true
  dns-hijack:
    - udp://any:53
    - tcp://any:53

# DNS
dns:
  enable: true
  prefer-h3: true
  listen: 127.0.0.1:1053
  ipv6: true
  enhanced-mode: redir-host
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query

# è®¢é˜…å‚æ•°
proxy-providers:
  Clash:
    type: http
    url: 'è®¢é˜…é“¾æ¥'
    interval: 10800
    health-check:
      enable: true
      url: 'https://www.gstatic.com/generate_204'
      interval: 1800
    path: './proxy_provider/Clash.yaml'

# é”šç‚¹ æ—¶å»¶ä¼˜é€‰
UrlTest: &UrlTest
  type: url-test
  interval: 600
  tolerance: 50
  lazy: true
  url: 'https://www.gstatic.com/generate_204'
  disable-udp: false
  timeout: 2000
  max-failed-times: 3
  include-all-providers: true

# æœ¬åœ°ç­–ç•¥
proxies:
  - name: ç›´æ¥è¿æ¥
    type: direct

  - name: æ‹’ç»è¿æ¥
    type: reject

# ç­–ç•¥ç»„
proxy-groups:
  - name: Clash
    type: select
    icon: 'https://raw.githubusercontent.com/Esgz/icon/refs/heads/main/Clash.png'
    include-all-providers: true

  - name: æ¼ç½‘ä¹‹é±¼
    type: select
    icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Catnet.png'
    proxies:
      - å…¨çƒæœåŠ¡
      - ç›´æ¥è¿æ¥

  - name: ç”µæŠ¥æœåŠ¡
    type: select
    icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram.png'
    proxies:
      - å…¨çƒæœåŠ¡
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - æ–°å›½èŠ‚ç‚¹

  - name: è°·æ­ŒæœåŠ¡
    type: select
    icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png'
    proxies:
      - æ–°å›½èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - å…¨çƒæœåŠ¡

  - name: å¾®è½¯æœåŠ¡
    type: select
    icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png'
    proxies:
      - å…¨çƒæœåŠ¡
      - ç›´æ¥è¿æ¥

  - name: å…¨çƒæœåŠ¡
    type: select
    icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png'
    proxies:
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹
      - æ–°å›½èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹

# èŠ‚ç‚¹ç­›é€‰
  - name: é¦™æ¸¯èŠ‚ç‚¹
    <<: *UrlTest
    filter: 'ğŸ‡­ğŸ‡°|é¦™æ¸¯'
    icon: 'https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/HK.png'

  - name: å°æ¹¾èŠ‚ç‚¹
    <<: *UrlTest
    filter: 'ğŸ‡¹ğŸ‡¼|å°æ¹¾'
    icon: 'https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/TW.png'

  - name: æ—¥æœ¬èŠ‚ç‚¹
    <<: *UrlTest
    filter: 'ğŸ‡¯ğŸ‡µ|æ—¥æœ¬'
    icon: 'https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/JP.png'

  - name: éŸ©å›½èŠ‚ç‚¹
    <<: *UrlTest
    filter: 'ğŸ‡°ğŸ‡·|éŸ©å›½'
    icon: 'https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/KR.png'

  - name: æ–°å›½èŠ‚ç‚¹
    <<: *UrlTest
    filter: 'ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡'
    icon: 'https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/SG.png'

  - name: ç¾å›½èŠ‚ç‚¹
    <<: *UrlTest
    filter: 'ğŸ‡ºğŸ‡¸|ç¾å›½'
    icon: 'https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/US.png'

# é”šç‚¹ è§„åˆ™ç±»å‹
list: &list
  type: http
  interval: 86400
  update-strategy: incremental
  timeout: 5000
  behavior: classical
  format: text

# è¿œç¨‹è§„åˆ™
rule-providers:
  å±€åŸŸç½‘ç»œ:
    <<: *list
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Lan/Lan.list'
    path: './RuleSet/Lan.list'

  åŸŸåæ‹¦æˆª:
    <<: *list
    url: 'https://raw.githubusercontent.com/Esgz/Surge/refs/heads/main/Reject.list'
    path: './RuleSet/Reject.list'

  ç”µæŠ¥æœåŠ¡:
    <<: *list
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Telegram/Telegram.list'
    path: './RuleSet/Telegram.list'

  å¾®è½¯æœåŠ¡:
    <<: *list
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Microsoft/Microsoft.list'
    path: './RuleSet/Microsoft.list'

  åª’ä½“æœåŠ¡:
    <<: *list
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/GlobalMedia/GlobalMedia.list'
    path: './RuleSet/GlobalMedia.list'

  è°·æ­ŒæœåŠ¡:
    <<: *list
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Google/Google.list'
    path: './RuleSet/Google.list'

  å…¨çƒæœåŠ¡:
    <<: *list
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list'
    path: './RuleSet/Global.list'

  å¤§é™†æœåŠ¡:
    <<: *list
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ChinaMax/ChinaMax.list'
    path: './RuleSet/ChinaMax.list'

rules:
  - RULE-SET,å±€åŸŸç½‘ç»œ,ç›´æ¥è¿æ¥
  - RULE-SET,åŸŸåæ‹¦æˆª,æ‹’ç»è¿æ¥
  - RULE-SET,ç”µæŠ¥æœåŠ¡,ç”µæŠ¥æœåŠ¡  
  - RULE-SET,å¾®è½¯æœåŠ¡,å¾®è½¯æœåŠ¡
  - RULE-SET,åª’ä½“æœåŠ¡,è°·æ­ŒæœåŠ¡
  - RULE-SET,è°·æ­ŒæœåŠ¡,è°·æ­ŒæœåŠ¡
  - RULE-SET,å…¨çƒæœåŠ¡,å…¨çƒæœåŠ¡
  - RULE-SET,å¤§é™†æœåŠ¡,ç›´æ¥è¿æ¥
  - MATCH,æ¼ç½‘ä¹‹é±¼